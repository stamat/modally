/* modally v1.1.0 | undefined | MIT License */
(()=>{function t(t,e){for(const i in e)t[i]=e[i]}function e(t){return function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}(t)?function(t){for(const e in t)return!1;return!0}(t):function(t){return Array.isArray(t)}(t)?function(t){return 0===t.length}(t):!!o(t)&&""===t}function i(t){if(/^\s*null\s*$/.test(t))return null;const e=function(t){if(/^\s*(true|false)\s*$/i.test(t))return"true"===t}(t);return void 0!==e?e:function(t){return/^\s*\d+\s*$/.test(t)?parseInt(t):/^\s*[\d.]+\s*$/.test(t)?parseFloat(t):void 0}(t)||function(t){if(/^\s*\[.*\]\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\{.*\}\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\/.*\/g?i?\s*$/.test(t))try{return new RegExp(t)}catch(t){}}(t)||t}function o(t){return"string"==typeof t}function n(t){return"function"==typeof t}function s(t,e,i=!1){if(t&&e)for(let o in e)i&&(o=o.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))),t.style[o]=e[o]}function l(t){const e=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!e)return 0;switch(e[2]){case"ms":return parseFloat(e[1]);case"s":return 1e3*parseFloat(e[1]);default:return 0}}function a(t){return(new DOMParser).parseFromString(t,"text/html").body.firstChild}function d(t){const o=t||window.location.hash.replace("#","");return e(o)?{}:function(t,e=!0){const o={};return t.split("&").forEach((t=>{const n=t.match(/([^\s=&]+)=?([^&\s]+)?/),s=n[1],l=n[2];o[s]=void 0!==l&&e?i(decodeURIComponent(l)):l})),o}(o)}function r(t){const i=window.location.hash.replace("#","");e(i)||t(i)}function c(t,e="all"){if(!t)return;const i=`${e}TransitionTimer`;t.dataset[i]&&(clearTimeout(parseInt(t.dataset[i])),delete t.dataset[i])}function h(t,e="all",i,o){if(!t)return;const s=`${e}TransitionTimer`,l=setTimeout((()=>{c(t,e),n(o)&&o(t)}),i);return t.dataset[s]=l.toString(),l}function p(t,e="all"){if(!t)return;const i=`${e}TransitionDuration`;if(t.dataset[i])return parseInt(t.dataset[i]);const o=function(t){const e=getComputedStyle(t),i=e.getPropertyValue("transition-property").split(","),o=e.getPropertyValue("transition-duration").split(","),n={};for(let t=0;t<i.length;t++)n[i[t].trim()]=o.hasOwnProperty(t)?l(o[t].trim()):null;return n}(t);return o.hasOwnProperty(e)?(t.dataset[i]=o[e].toString(),o[e]):void 0}var m=class{constructor(o,n,l={},d){this.id=o,this.element=n,this.modallyInstance=d,this.videoRegEx={},this.videoRegEx.YOUTUBE=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,this.videoRegEx.VIMEO=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,this.videoRegEx.VIDEO=/(.*\/[^\/]+\.mp4|ogg|ogv|ogm|webm|avi)\s?$/i,this.options={landing:"body","max-width":"none",classes:"","vertical-align":"middle","close-parent":!1,"close-other":!1,image:!1,video:!1,autoplay:!0,template:'<div class="modally-wrap"><div class="modally-table"><div class="modally-cell"><div class="modally-underlay modally-close"></div><div class="modally" role="dialog" aria-modal="true"><button tabindex="1" class="modally-close modally-close-button">&times;</button><div class="modally-content"></div></div></div></div></div>'};const r=this.options.hasOwnProperty("landing")&&this.options.landing instanceof HTMLElement?this.options.landing:document.querySelector(this.options.landing);if(!r)return;if(t(this.options,l),this.element)for(const t in this.options)this.element.hasAttribute(`modally-${t}`)&&(this.options[t]=i(this.element.getAttribute(`modally-${t}`)));this.template=a(this.options.template),this.template.setAttribute("modally-id",this.id);const c=this.template.querySelector(".modally");c&&s(c,{maxWidth:this.options["max-width"]});const h=this.template.querySelector(".modally-cell");if(h&&s(h,{verticalAlign:this.options["vertical-align"]}),e(this.options.classes)||this.template.classList.add(this.options.classes),this.options.video)this.setupVideoLanding();else if(this.options.image)this.setupImageLanding();else if(this.element){const t=((p=this.element)&&p.parentNode&&p.parentNode.removeChild(p),p);this.template.querySelector(".modally-content").appendChild(t)}var p;this.element&&this.element.classList.contains("modally-init")&&this.element.classList.remove("modally-init"),this.element&&(this.element.style.display="",this.element.removeAttribute("hidden")),this.template.querySelectorAll(".modally-close").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),this.modallyInstance.close(this)}))})),r.appendChild(this.template),this.zIndex=window.getComputedStyle(this.template).zIndex}setupVideoLanding(){const t=a('<svg aria-hidden="true" style="width: 100%; height: auto; display: block;" width="1920" height="1080"></svg>'),e=a(`\n      <div hidden>\n        <iframe hidden class="youtube embed-template template" data-src="https://www.youtube.com/embed/{ID}?${this.options.autoplay?"autoplay=1&amp;":""}autohide=1&amp;fs=1&amp;rel=0&amp;hd=1&amp;wmode=opaque&amp;enablejsapi=1" type="text/html" width="1920" height="1080" allow="autoplay" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto"></iframe>\n        <iframe hidden class="vimeo embed-template template" title="vimeo-player" data-src="https://player.vimeo.com/video/{ID}?${this.options.autoplay?"autoplay=1":""}" type="text/html" width="1920" height="1080" allow="autoplay; allowfullscreen" rameborder="0" allowfullscreen=""></iframe>\n        <video hidden height="1920" width="1080" class="video embed-template template" data-src="{ID}" controls playsinline${this.options.autoplay?" autoplay":""}></video>\n      </div>\n    `),i=a('<div class="iframe-landing"></div>');i.appendChild(t),this.template.querySelector(".modally-content").appendChild(i),this.template.appendChild(e),this.template.classList.add("video-embed")}setupImageLanding(){const t=a('<div class="image-landing"><img style="width: 100%; height: auto;" decoding="async" loading="lazy" alt=""></div>');this.template.querySelector(".modally-content").appendChild(t),this.template.classList.add("image-embed")}getVideoId(t){for(const e in this.videoRegEx){const i=t.match(this.videoRegEx[e]);if(i)return{type:e.toLowerCase(),id:i[1]}}return!1}mountVideo(t){const e=this.getVideoId(t);let i=this.template.querySelector(`.embed-template.template.${e.type}`);const o=this.template.querySelector(".modally-content .iframe-landing");i&&o&&(i=i.cloneNode(!0),i.setAttribute("src",i.getAttribute("data-src").replace("{ID}",e.id)),i.style.display="block",i.removeAttribute("hidden"),o.appendChild(i))}unmountVideo(){const t=this.template.querySelector(".modally-content iframe, .modally-content video");t&&t.remove()}mountImage(t){const e=this.template.querySelector(".modally-content img");e&&(e.setAttribute("src",t),e.style.display="block",e.removeAttribute("hidden"))}open(t){this.options.video&&t&&t.hasOwnProperty("video")&&this.mountVideo(t.video),this.options.image&&t&&t.hasOwnProperty("image")&&this.mountImage(t.image),function(t,e){if(!t)return;c(t,"opacity");const i=getComputedStyle(t),o=p(t,"opacity");let s=parseInt(i.opacity);isNaN(s)&&(s=0),t.hasAttribute("hidden")&&t.removeAttribute("hidden"),t.style.pointerEvents="none",s||(t.style.visibility="hidden"),t.style.display="block",t.style.opacity=s||0,setTimeout((()=>{t.style.opacity=1,t.style.visibility="visible",t.style.removeProperty("pointer-events")}),10),h(t,"opacity",o,(t=>{n(e)&&e(t)}))}(this.template)}close(t){!function(t,e){if(!t)return;c(t,"opacity");const i=getComputedStyle(t),o=p(t,"opacity");t.style.opacity=i.opacity,setTimeout((()=>{t.style.opacity=0,t.style.pointerEvents="none"}),10),h(t,"opacity",o,(t=>{t.style.display="none",t.style.opacity="",t.style.pointerEvents="",n(e)&&e(t)}))}(this.template,(()=>{this.options.video&&this.unmountVideo(),s(this.template,{zIndex:this.zIndex})}))}},u=class{constructor(e){this.index={},this.opened=[],this.options={disableScroll:!0},this.scrollbarWidth=function(){const t=document.createElement("div");s(t,{width:"100px",height:"100px",position:"absolute",left:"-9999px",zIndex:"0",overflowX:"hidden",overflowY:"scroll"}),document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}(),e&&t(this.options,e),document.addEventListener("click",(t=>{const e=t.target;if(!e.matches('[target^="_modal"]:not([disabled])'))return;const i=e.getAttribute("target").replace("_modal:","").split(":"),o=e.getAttribute("href");let n,s;if(o&&o.length&&"#"!==o&&(t.preventDefault(),n=o.replace("#",""),s=this.get(n)),i.length>1&&(n=i[1],s=this.get(n)),"close"===i[0])return this.close(s,e.dataset);s&&this.open(s,e.dataset)})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.close()}))}modallyHashCheck(t){const e=d(t);for(const t in e)void 0===e[t]&&this.index.hasOwnProperty(t)&&this.open(t,e)}add(t,e){let i=document.getElementById(t);e||(e={}),!i&&e.selector&&(i=o(e.selector)?document.querySelector(e.selector):e.selector),this.index[t]=new m(t,i,e,this)}get(t){return this.index[t]}open(t,e){const i=t instanceof m?t:this.get(t);i&&(i.open(e),!this.opened.length&&this.options.disableScroll&&function(t=0){const e=document.body;e.style.overflow="hidden",e.style.paddingRight=`${t}px`}(),this.opened.push(i),s(i.template,{zIndex:i.zIndex+this.opened.length}))}close(t,e){!t&&this.opened.length&&(t=this.opened[this.opened.length-1]);const i=t instanceof m?t:this.get(t);i&&(i.close(e),this.opened.pop(),!this.opened.length&&this.options.disableScroll&&function(t=0){const e=document.body;e.style.overflow="",t&&(e.style.paddingRight="")}())}initHashCheck(){var t;r(t=t=>{this.modallyHashCheck(t)}),window.addEventListener("hashchange",(()=>{r(t)}))}};window.Modally||(window.Modally=u)})();