/* modally v1.1.7 | undefined | MIT License */
(()=>{function m(t,e){for(const i in e)t[i]=e[i];return t}function P(t){for(const e in t)return!1;return!0}function M(t){return t.length===0}function y(t){return q(t)?P(t):N(t)?M(t):v(t)?t==="":!1}function H(t){if(/^\s*(true|false)\s*$/i.test(t))return t==="true"}function R(t){if(/^\s*\d+\s*$/.test(t))return parseInt(t);if(/^\s*[\d.]+\s*$/.test(t))return parseFloat(t)}function D(t){if(/^\s*\[.*\]\s*$/.test(t))try{return JSON.parse(t)}catch{}}function z(t){if(/^\s*\{.*\}\s*$/.test(t))try{return JSON.parse(t)}catch{}}function V(t){if(/^\s*\/.*\/g?i?\s*$/.test(t))try{return new RegExp(t)}catch{}}function g(t){if(/^\s*null\s*$/.test(t))return null;const e=H(t);return e!==void 0?e:R(t)||D(t)||z(t)||V(t)||t}function q(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function N(t){return Array.isArray(t)}function v(t){return typeof t=="string"}function d(t){return typeof t=="function"}function E(t){return t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function k(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var j=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,U=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,_=/\/([^\/]+\.(?:mp4|ogg|ogv|ogm|webm|avi))\s*$/i,C=/([^\s=&]+)=?([^&\s]+)?/;function Q(t,e=!0){const i={};return t.split("&").forEach(s=>{const n=s.match(C);if(!n)return;const r=n[1],a=n[2];i[r]=g(a!==void 0&&e?decodeURIComponent(a):a),C.lastIndex=0}),i}function W(t,e=!0){const i=[];return Object.keys(t).forEach(o=>{const s=t[o];if(s===void 0)return i.push(o);const n=e?encodeURIComponent(s):s;i.push(`${o}=${n}`)}),i.join("&")}function u(t,e,i=!1){if(!(!t||!e))for(let o in e)i&&(o=E(o)),t.style[o]=e[o]}function F(t){const i=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!i)return 0;switch(i[2]){case"ms":return parseFloat(i[1]);case"s":return parseFloat(i[1])*1e3;default:return 0}}function B(t){const e=getComputedStyle(t),i=e.getPropertyValue("transition-property").split(","),o=e.getPropertyValue("transition-duration").split(","),s={};for(let n=0;n<i.length;n++){const r=i[n].trim();s[r]=o.hasOwnProperty(n)?F(o[n].trim()):null}return s}function Y(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t}function p(t,e){if(t instanceof Element||t instanceof NodeList)return t;const o=new DOMParser().parseFromString(t,"text/html");return e?o.body.childNodes:o.body.firstChild}function J(t,e,i){if(typeof MutationObserver>"u")return document.addEventListener(e,s=>{const n=s.target.closest(t);n&&i(s,n)}),null;const o=new MutationObserver(s=>{for(const n of s)for(const r of n.addedNodes)r instanceof HTMLElement&&r.matches(t)&&r.addEventListener(e,a=>{i(a,a.currentTarget)})});for(const s of document.querySelectorAll(t))s.addEventListener(e,n=>{i(n,n.currentTarget)});return o.observe(document.body,{childList:!0,subtree:!0}),o}function Z(t,e,i){if(v(e))return J(t,e,i);const o=new MutationObserver(s=>{for(const n of s)for(const r of n.addedNodes)r instanceof HTMLElement&&r.matches(t)&&e(r)});for(const s of document.querySelectorAll(t))e(s);return o.observe(document.body,{childList:!0,subtree:!0}),o}function A(){const t=document.createElement("div");u(t,{width:"100px",height:"100px",position:"absolute",left:"-9999px",zIndex:"0",overflowX:"hidden",overflowY:"scroll"}),document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function X(t){return t===void 0&&(t=A()),window.innerHeight<document.body.scrollHeight&&t>0}function G(t){const e=document.body;t&&X(t)&&(e.style.paddingRight=`${t}px`),e.style.overflow="hidden"}function K(t){const e=document.body;e.style.overflow="",t&&(e.style.paddingRight="")}function O(t){const e=t||window.location.hash.replace("#","");return y(e)?{}:Q(e)}function x(t){const e=window.location.hash.replace("#","");y(e)||t(e)}function tt(t,e){x(t),!(e&&window[e])&&(e&&(window[e]=!0),window.addEventListener("hashchange",()=>{x(t)}))}function b(t,e="all"){if(!t)return;const i=`${e}TransitionTimer`;t.dataset[i]&&(clearTimeout(parseInt(t.dataset[i])),delete t.dataset[i])}function I(t,e="all",i,o){if(!t)return;const s=`${e}TransitionTimer`,n=setTimeout(()=>{b(t,e),d(o)&&o(t)},i);return t.dataset[s]=n.toString(),n}function T(t,e="all"){if(!t)return;const i=`${e}TransitionDuration`;if(t.dataset[i])return parseInt(t.dataset[i]);const o=B(t);if(o.hasOwnProperty(e))return t.dataset[i]=o[e].toString(),o[e]}function et(t,e,i){if(!t)return;b(t,"opacity");const o=getComputedStyle(t),s=T(t,"opacity");let n=parseInt(o.opacity);Number.isNaN(n)&&(n=0),t.hasAttribute("hidden")&&t.removeAttribute("hidden"),t.style.pointerEvents="none",n||(t.style.visibility="hidden"),t.style.display="block",t.style.opacity=n||0,setTimeout(()=>{t.style.opacity=1,t.style.visibility="visible",t.style.removeProperty("pointer-events"),d(i)&&i(t)},10),I(t,"opacity",s,r=>{d(e)&&e(r)})}function it(t,e,i){if(!t)return;b(t,"opacity");const o=getComputedStyle(t),s=T(t,"opacity");t.style.opacity=o.opacity,setTimeout(()=>{t.style.opacity=0,t.style.pointerEvents="none",d(i)&&i(t)},10),I(t,"opacity",s,n=>{n.style.display="none",n.style.opacity="",n.style.pointerEvents="",d(e)&&e(n)})}var w=class{constructor(t,e,i={},o){this.id=t,this.element=e,this.modallyInstance=o,this.opened=!1,this.videoRegEx={},this.videoRegEx.YOUTUBE=j,this.videoRegEx.VIMEO=U,this.videoRegEx.VIDEO=_,this.options={disableScroll:!0,landing:document.body,maxWidth:"none",classes:"",verticalAlign:"middle",closeParent:!1,closeOthers:!1,enableHashChange:!0,closeOthersOnHashChange:!1,image:!1,video:!1,autoplay:!0,scrollToTop:!0,template:`
        <div class="modally-wrap">
          <div class="modally-table">
            <div class="modally-cell">
              <div class="modally-underlay modally-close"></div>
              <div class="modally" role="dialog" aria-modal="true">
                <button tabindex="1" class="modally-close modally-close-button" aria-label="Close">&times;</button>
                <div class="modally-content"></div>
              </div>
            </div>
          </div>
        </div>`};const s=this.options.hasOwnProperty("landing")&&this.options.landing instanceof HTMLElement?this.options.landing:document.querySelector(this.options.landing);if(!s)return;if(i){const a={};for(const l in i){const h=/^[a-z0-9]+$/i.test(l)?l:E(l);a[h]=i[l]}i=a}if(m(this.options,i),this.template=this.options.template instanceof Element||this.options.template instanceof NodeList?this.options.template:p(this.options.template),this.element){for(const a in this.options){const l=/^[a-z0-9]+$/.test(a)?a:k(a);this.element.hasAttribute(`modally-${l}`)&&(this.options[a]=g(this.element.getAttribute(`modally-${l}`)))}this.element.hasAttribute("id")&&this.element.removeAttribute("id")}this.template.setAttribute("id",this.id);const n=this.template.querySelector(".modally");n&&u(n,{maxWidth:`${this.options.maxWidth}px`});const r=this.template.querySelector(".modally-cell");if(r&&u(r,{verticalAlign:this.options.verticalAlign}),y(this.options.classes)||this.template.classList.add(this.options.classes),this.options.video)this.setupVideoLanding();else if(this.options.image)this.setupImageLanding();else if(this.element){const a=Y(this.element);this.template.querySelector(".modally-content").appendChild(a)}this.element&&(this.element.style.display="",this.element.removeAttribute("hidden")),this.template.querySelectorAll(".modally-close").forEach(a=>{a.addEventListener("click",l=>{l.preventDefault(),this.modallyInstance.close(this,l.target)})}),s.appendChild(this.template),this.zIndex=window.getComputedStyle(this.template).zIndex}setupVideoLanding(){const t=p('<svg aria-hidden="true" style="width: 100%; height: auto; display: block;" width="1920" height="1080"></svg>'),e=this.options.autoplay?"autoplay=1&amp;":"",i=this.options.autoplay?"autoplay=1":"",o=this.options.autoplay?" autoplay":"",s=p(`
      <div hidden>
        <iframe hidden class="youtube embed-template template" data-src="https://www.youtube.com/embed/{ID}?${e}autohide=1&amp;fs=1&amp;rel=0&amp;hd=1&amp;wmode=opaque&amp;enablejsapi=1" type="text/html" width="1920" height="1080" allow="autoplay" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto"></iframe>
        <iframe hidden class="vimeo embed-template template" title="vimeo-player" data-src="https://player.vimeo.com/video/{ID}?${i}" type="text/html" width="1920" height="1080" allow="autoplay; allowfullscreen" rameborder="0" allowfullscreen=""></iframe>
        <video hidden height="1920" width="1080" class="video embed-template template" data-src="{ID}" controls playsinline${o}></video>
      </div>
    `),n=p('<div class="iframe-landing"></div>');n.appendChild(t),this.template.querySelector(".modally-content").appendChild(n),this.template.appendChild(s),this.template.classList.add("video-embed")}setupImageLanding(){const t=p('<div class="image-landing"><img style="width: 100%; height: auto;" decoding="async" loading="lazy" alt=""></div>');this.template.querySelector(".modally-content").appendChild(t),this.template.classList.add("image-embed")}getVideoId(t){for(const e in this.videoRegEx){const i=t.match(this.videoRegEx[e]);if(i){const o=e.toLowerCase();return{type:o,id:o==="video"?t:i[1]}}this.videoRegEx[e].lastIndex=0}return!1}mountVideo(t){const e=this.getVideoId(t);let i=this.template.querySelector(`.embed-template.template.${e.type}`);const o=this.template.querySelector(".modally-content .iframe-landing");!i||!o||(i=i.cloneNode(!0),i.setAttribute("src",i.getAttribute("data-src").replace("{ID}",e.id)),i.style.display="block",i.removeAttribute("hidden"),o.appendChild(i))}unmountVideo(){const t=this.template.querySelector(".modally-content iframe, .modally-content video");t&&t.remove()}mountImage(t,e,i,o){const s=this.template.querySelector(".modally-content img");s&&(s.setAttribute("src",t),s.style.display="block",s.removeAttribute("hidden"),o&&s.setAttribute("srcset",o),e&&s.setAttribute("width",e),i&&s.setAttribute("height",i))}open(t,e){if(this.opened)return;this.opened=!0;const i=t instanceof HTMLElement?t.dataset:t;return this.options.video&&i&&i.hasOwnProperty("video")&&this.mountVideo(i.video),this.options.image&&i&&i.hasOwnProperty("image")&&this.mountImage(i.image,i.width,i.height,i.srcset),document.body.classList.add(`modally-${this.id}`),et(this.template,()=>{d(e)&&e(this)},o=>{this.options.scrollToTop&&(o.scrollTop=0)}),!0}close(t,e){if(this.opened)return this.opened=!1,it(this.template,()=>{this.options.video&&this.unmountVideo(),document.body.classList.remove(`modally-${this.id}`),d(e)&&e(this),u(this.template,{zIndex:this.zIndex})}),!0}dispatchEvents(t,e){this.target=e,this.element&&this.element.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),this.template.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),document.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),document.dispatchEvent(new CustomEvent(`modally:${t}:${this.id}`,{detail:this}))}},ot=class{constructor(t){this.index={},this.opened=[],this.options={selector:null},this.scrollbarWidth=A(),t&&m(this.options,t),this.options.selector&&document.querySelectorAll(this.options.selector).forEach(i=>{if(i.hasAttribute("id")){const o=this.options.selector.replace(".","");i.classList.remove(o);const s={...this.options,element:i};delete s.selector,this.add(i.getAttribute("id"),s)}}),Z('[target^="_modal"]',"click",(e,i)=>{if(!i||i.matches("[disabled]"))return;const s=i.getAttribute("target").replace("_modal:","").split(":"),n=i.getAttribute("href");let r,a;function l(h,c){const S={};for(let f=0;f<c.length;f++)h.hasOwnProperty(c[f])&&(S[c[f]]=h[c[f]]);return S}if(n&&n.length&&n!=="#"&&(e.preventDefault(),r=n.replace("#",""),a=this.get(r),a.options.updateHash)){const h=l(i.dataset,["image","video","width","height","srcset"]),c=W(h);window.location.hash=`#${r}${c.length?`&${c}`:""}`}if(s.length>1&&(r=s[1],a=this.get(r)),s[0]==="close")return this.close(a,i);a&&this.open(a,i)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.close()}),this.initHashCheck()}modallyHashCheck(t){const e=O(t);for(const i in e){if(e[i]!==void 0)continue;const o=this.get(i);o&&(o.options.closeOthersOnHashChange&&this.closeAll(),o.options.enableHashChange&&this.open(i,e))}}modallyInitialHashCheck(t){this.options.closeOthersOnHashChange&&this.closeAll();const e=O();if(!e.hasOwnProperty(t))return;const i=this.get(t);i&&(i.options.closeOthersOnHashChange&&this.closeAll(),i.options.enableHashChange&&this.open(t,e))}add(t,e){if(!t)return;e||(e={});const i={...this.options};delete i.selector,m(i,e),e=i;let o;e.element?(o=e.element,delete e.element):t instanceof HTMLElement?(o=t,t=t.getAttribute("id")):o=document.getElementById(t),!o&&e.selector&&(o=v(e.selector)?document.querySelector(e.selector):e.selector,delete e.selector);const s=new w(t,o,e,this);this.index[t]=s,s.dispatchEvents("added"),s.options.enableHashChange&&this.modallyInitialHashCheck(t)}get(t){return this.index[t]}isOpen(t){return this.get(t).opened}open(t,e){const i=t instanceof w?t:this.get(t);!i||(i.options.closeParent&&this.close(),i.options.closeOthers&&this.closeAll(),i.opened)||(i.dispatchEvents("open",e),!this.opened.length&&i.options.disableScroll&&G(this.scrollbarWidth),this.opened.length||document.body.classList.add("modally-open"),u(i.template,{zIndex:i.zIndex+this.opened.length}),!i.open(e,()=>{i.dispatchEvents("opened",e)}))||this.opened.push(i)}close(t,e){!t&&this.opened.length&&(t=this.opened[this.opened.length-1]);const i=t instanceof w?t:this.get(t);!i||!i.close(e,()=>{!this.opened.length&&i.options.disableScroll&&K(this.scrollbarWidth),this.opened.length||document.body.classList.remove("modally-open"),i.dispatchEvents("closed",e)})||(this.opened.pop(),i.dispatchEvents("close",e))}closeAll(){[...this.opened].forEach(t=>this.close(t))}initHashCheck(){tt(t=>{this.modallyHashCheck(t)},"modallyHashCheckListenerInitialized")}},L=ot;window.Modally||(window.Modally=L),(window.hasOwnProperty("jQuery")||window.hasOwnProperty("$"))&&function(t){t.fn.modally=function(e){return window.hasOwnProperty("jQueryModally")||(window.jQueryModally=new L({disableScroll:!0,selector:".modally-init"})),this.each(function(){e.element=this,window.jQueryModally.add(this,e)})}}(jQuery||$)})();
