/* modally v1.1.0 | undefined | MIT License */
(()=>{function t(t){return function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}(t)?function(t){for(const e in t)return!1;return!0}(t):function(t){return Array.isArray(t)}(t)?function(t){return 0===t.length}(t):!!i(t)&&""===t}function e(t){if(/^\s*null\s*$/.test(t))return null;const e=function(t){if(/^\s*(true|false)\s*$/i.test(t))return"true"===t}(t);return void 0!==e?e:function(t){return/^\s*\d+\s*$/.test(t)?parseInt(t):/^\s*[\d.]+\s*$/.test(t)?parseFloat(t):void 0}(t)||function(t){if(/^\s*\[.*\]\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\{.*\}\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\/.*\/g?i?\s*$/.test(t))try{return new RegExp(t)}catch(t){}}(t)||t}function i(t){return"string"==typeof t}function n(t,e,i=!1){if(t&&e)for(let n in e)i&&(n=n.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))),t.style[n]=e[n]}function o(t){return(new DOMParser).parseFromString(t,"text/html").body.firstChild}function s(t){return function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}(t)?function(t){for(const e in t)return!1;return!0}(t):function(t){return Array.isArray(t)}(t)?function(t){return 0===t.length}(t):!!function(t){return"string"==typeof t}(t)&&""===t}function a(t){if(/^\s*null\s*$/.test(t))return null;const e=function(t){if(/^\s*(true|false)\s*$/i.test(t))return"true"===t}(t);return void 0!==e?e:function(t){return/^\s*\d+\s*$/.test(t)?parseInt(t):/^\s*[\d.]+\s*$/.test(t)?parseFloat(t):void 0}(t)||function(t){if(/^\s*\[.*\]\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\{.*\}\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\/.*\/g?i?\s*$/.test(t))try{return new RegExp(t)}catch(t){}}(t)||t}function l(t){return"function"==typeof t}function r(t){const e=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!e)return 0;switch(e[2]){case"ms":return parseFloat(e[1]);case"s":return 1e3*parseFloat(e[1]);default:return 0}}function d(t){const e=t||window.location.hash.replace("#","");return s(e)?{}:function(t,e=!0){const i={};return t.split("&").forEach((t=>{const n=t.match(/([^\s=&]+)=?([^&\s]+)?/),o=n[1],s=n[2];i[o]=void 0!==s&&e?a(decodeURIComponent(s)):s})),i}(e)}function c(t){const e=window.location.hash.replace("#","");s(e)||t(e)}function u(t,e="all"){if(!t)return;const i=`${e}TransitionTimer`;t.dataset[i]&&(clearTimeout(parseInt(t.dataset[i])),delete t.dataset[i])}function p(t,e="all",i,n){if(!t)return;const o=`${e}TransitionTimer`,s=setTimeout((()=>{u(t,e),l(n)&&n(t)}),i);return t.dataset[o]=s.toString(),s}function h(t,e="all"){if(!t)return;const i=`${e}TransitionDuration`;if(t.dataset[i])return parseInt(t.dataset[i]);const n=function(t){const e=getComputedStyle(t),i=e.getPropertyValue("transition-property").split(","),n=e.getPropertyValue("transition-duration").split(","),o={};for(let t=0;t<i.length;t++)o[i[t].trim()]=n.hasOwnProperty(t)?r(n[t].trim()):null;return o}(t);return n.hasOwnProperty(e)?(t.dataset[i]=n[e].toString(),n[e]):void 0}var m=class{constructor(i,s,a={},l){this.id=i,this.element=s,this.modallyInstance=l,this.videoRegEx={},this.videoRegEx.YOUTUBE=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,this.videoRegEx.VIMEO=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,this.videoRegEx.VIDEO=/(.*\/[^\/]+\.mp4|ogg|ogv|ogm|webm|avi)\s?$/i,this.scrollWidth=function(){const t=document.createElement("div");n(t,{width:"100px",height:"100px",position:"absolute",left:"-9999px",zIndex:"0",overflowX:"hidden",overflowY:"scroll"}),document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}(),this.options={landing:"body","max-width":"none",classes:"","vertical-align":"middle","close-parent":!1,"close-other":!1,image:!1,video:!1,autoplay:!0,template:'<div class="modally-wrap"><div class="modally-table"><div class="modally-cell"><div class="modally-underlay modally-close"></div><div class="modally" role="dialog" aria-modal="true"><button tabindex="1" class="modally-close modally-close-button">&times;</button><div class="modally-content"></div></div></div></div></div>',"in-duration":"normal","in-easing":"swing","out-duration":"normal","out-easing":"swing","in-css":null,"out-css":null};const r=this.options.hasOwnProperty("landing")&&this.options.landing instanceof HTMLElement?this.options.landing:document.querySelector(this.options.landing);if(!r)return;if(function(t,e){for(const i in e)t[i]=e[i]}(this.options,a),this.element)for(const t in this.options)this.element.hasAttribute(`modally-${t}`)&&(this.options[t]=e(this.element.getAttribute(`modally-${t}`)));this.template=o(this.options.template),this.template.setAttribute("modally-id",this.id);const d=this.template.querySelector(".modally");d&&n(d,{maxWidth:this.options["max-width"]});const c=this.template.querySelector(".modally-cell");if(c&&n(c,{verticalAlign:this.options["vertical-align"]}),t(this.options.classes)||this.template.classList.add(this.options.classes),this.options.video)this.setupVideoLanding();else if(this.options.image)this.setupImageLanding();else if(this.element){const t=((u=this.element)&&u.parentNode&&u.parentNode.removeChild(u),u);this.template.querySelector(".modally-content").appendChild(t)}var u;this.element&&this.element.classList.contains("modally-init")&&this.element.classList.remove("modally-init"),this.element&&(this.element.style.display="",this.element.removeAttribute("hidden")),this.template.querySelectorAll(".modally-close").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),this.modallyInstance.close(this)}))})),r.appendChild(this.template),this.zIndex=window.getComputedStyle(this.template).zIndex}setupVideoLanding(){const t=o('<svg aria-hidden="true" style="width: 100%; height: auto; display: block;" width="1920" height="1080"></svg>'),e=o(`\n      <div hidden>\n        <iframe hidden class="youtube embed-template template" data-src="https://www.youtube.com/embed/{ID}?${this.options.autoplay?"autoplay=1&amp;":""}autohide=1&amp;fs=1&amp;rel=0&amp;hd=1&amp;wmode=opaque&amp;enablejsapi=1" type="text/html" width="1920" height="1080" allow="autoplay" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto"></iframe>\n        <iframe hidden class="vimeo embed-template template" title="vimeo-player" data-src="https://player.vimeo.com/video/{ID}?${this.options.autoplay?"autoplay=1":""}" type="text/html" width="1920" height="1080" allow="autoplay; allowfullscreen" rameborder="0" allowfullscreen=""></iframe>\n        <video hidden height="1920" width="1080" class="video embed-template template" data-src="{ID}" controls playsinline${this.options.autoplay?" autoplay":""}></video>\n      </div>\n    `),i=o('<div class="iframe-landing"></div>');i.appendChild(t),this.template.querySelector(".modally-content").appendChild(i),this.template.appendChild(e),this.template.classList.add("video-embed")}setupImageLanding(){const t=o('<div class="image-landing"><img style="width: 100%; height: auto;" decoding="async" loading="lazy" alt=""></div>');this.template.querySelector(".modally-content").appendChild(t),this.template.classList.add("image-embed")}getVideoId(t){for(const e in this.videoRegEx){const i=t.match(this.videoRegEx[e]);if(i)return{type:e.toLowerCase(),id:i[1]}}return!1}mountVideo(t){const e=this.getVideoId(t);let i=this.template.querySelector(`.embed-template.template.${e.type}`);const n=this.template.querySelector(".modally-content .iframe-landing");i&&n&&(i=i.cloneNode(!0),i.setAttribute("src",i.getAttribute("data-src").replace("{ID}",e.id)),i.style.display="block",i.removeAttribute("hidden"),n.appendChild(i))}unmountVideo(){const t=this.template.querySelector(".modally-content iframe, .modally-content video");t&&t.remove()}mountImage(t){const e=this.template.querySelector(".modally-content img");e&&(e.setAttribute("src",t),e.style.display="block",e.removeAttribute("hidden"))}open(t,e){this.options.video&&t&&t.hasOwnProperty("video")&&this.mountVideo(t.video),this.options.image&&t&&t.hasOwnProperty("image")&&this.mountImage(t.image),function(t,e){if(!t)return;u(t,"opacity");const i=getComputedStyle(t),n=h(t,"opacity");let o=parseInt(i.opacity);isNaN(o)&&(o=0),t.hasAttribute("hidden")&&t.removeAttribute("hidden"),t.style.pointerEvents="none",o||(t.style.visibility="hidden"),t.style.display="block",t.style.opacity=o||0,setTimeout((()=>{t.style.opacity=1,t.style.visibility="visible",t.style.removeProperty("pointer-events")}),10),p(t,"opacity",n,(t=>{l(e)&&e(t)}))}(this.template,e)}close(t,e){!function(t,e){if(!t)return;u(t,"opacity");const i=getComputedStyle(t),n=h(t,"opacity");t.style.opacity=i.opacity,setTimeout((()=>{t.style.opacity=0}),10),p(t,"opacity",n,(t=>{t.style.display="none",t.style.opacity="",l(e)&&e(t)}))}(this.template,(()=>{this.options.video&&this.unmountVideo(),e&&e(),n(this.template,{zIndex:this.zIndex})}))}},y=class{constructor(){this.index={},this.opened=[],document.addEventListener("click",(t=>{const e=t.target;if(!e.matches('[target="_modal"]:not([disabled]), [target="_modal:open"]:not([disabled]), [target="_modal:close"]:not([disabled])'))return;const i=e.getAttribute("href");if(i&&i.length&&"#"!==i){const n=this.get(i.replace("#",""));if(n){if(t.preventDefault(),e.matches('[target="_modal:close"]'))return this.close(n,e.dataset);this.open(n,e.dataset)}}})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.close()}))}modallyHashCheck(t){const e=d(t);for(const t in e)void 0===e[t]&&this.index.hasOwnProperty(t)&&this.open(t,e)}add(t,e){let n=document.getElementById(t);e||(e={}),!n&&e.selector&&(n=i(e.selector)?document.querySelector(e.selector):e.selector),this.index[t]=new m(t,n,e,this)}get(t){return this.index[t]}open(t,e,i){const o=t instanceof m?t:this.get(t);o&&(o.open(e,i),this.opened.push(o),n(o.template,{zIndex:o.zIndex+this.opened.length}))}close(t,e,i){!t&&this.opened.length&&(t=this.opened[this.opened.length-1]);const n=t instanceof m?t:this.get(t);n&&(n.close(e,i),this.opened.pop())}initHashCheck(){var t;c(t=t=>{this.modallyHashCheck(t)}),window.addEventListener("hashchange",(()=>{c(t)}))}};window.Modally||(window.Modally=y)})();