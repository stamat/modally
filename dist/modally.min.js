/* modally v1.1.7 | undefined | MIT License */
(()=>{function y(t,e){for(const i in e)t[i]=e[i]}function I(t){for(const e in t)return!1;return!0}function O(t){return t.length===0}function u(t){return D(t)?I(t):H(t)?O(t):p(t)?t==="":!1}function S(t){if(/^\s*(true|false)\s*$/i.test(t))return t==="true"}function L(t){if(/^\s*\d+\s*$/.test(t))return parseInt(t);if(/^\s*[\d.]+\s*$/.test(t))return parseFloat(t)}function P(t){if(/^\s*\[.*\]\s*$/.test(t))try{return JSON.parse(t)}catch{}}function M(t){if(/^\s*\{.*\}\s*$/.test(t))try{return JSON.parse(t)}catch{}}function R(t){if(/^\s*\/.*\/g?i?\s*$/.test(t))try{return new RegExp(t)}catch{}}function g(t){if(/^\s*null\s*$/.test(t))return null;const e=S(t);return e!==void 0?e:L(t)||P(t)||M(t)||R(t)||t}function D(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function H(t){return Array.isArray(t)}function p(t){return typeof t=="string"}function d(t){return typeof t=="function"}function v(t){return t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function k(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function c(t,e,i=!1){if(!(!t||!e))for(let o in e)i&&(o=v(o)),t.style[o]=e[o]}function q(t){const i=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!i)return 0;switch(i[2]){case"ms":return parseFloat(i[1]);case"s":return parseFloat(i[1])*1e3;default:return 0}}function z(t){const e=getComputedStyle(t),i=e.getPropertyValue("transition-property").split(","),o=e.getPropertyValue("transition-duration").split(","),n={};for(let s=0;s<i.length;s++){const r=i[s].trim();n[r]=o.hasOwnProperty(s)?q(o[s].trim()):null}return n}function V(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t}function h(t,e){const o=new DOMParser().parseFromString(t,"text/html");return e?o.body.childNodes:o.body.firstChild}function N(t,e,i){if(typeof MutationObserver>"u")return document.addEventListener(e,n=>{const s=n.target.closest(t);s&&i(n,s)}),null;const o=new MutationObserver(n=>{for(const s of n)for(const r of s.addedNodes)r instanceof HTMLElement&&r.matches(t)&&r.addEventListener(e,a=>{i(a,a.currentTarget)})});for(const n of document.querySelectorAll(t))n.addEventListener(e,s=>{i(s,s.currentTarget)});return o.observe(document.body,{childList:!0,subtree:!0}),o}function j(t,e,i){if(p(e))return N(t,e,i);const o=new MutationObserver(n=>{for(const s of n)for(const r of s.addedNodes)r instanceof HTMLElement&&r.matches(t)&&e(r)});for(const n of document.querySelectorAll(t))e(n);return o.observe(document.body,{childList:!0,subtree:!0}),o}var _=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,Q=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,U=/\/([^\/]+\.(?:mp4|ogg|ogv|ogm|webm|avi))\s*$/i,b=/([^\s=&]+)=?([^&\s]+)?/;function W(t,e=!0){const i={};return t.split("&").forEach(n=>{const s=n.match(b),r=s[1],a=s[2];i[r]=a!==void 0&&e?g(decodeURIComponent(a)):a,b.lastIndex=0}),i}function w(){const t=document.createElement("div");c(t,{width:"100px",height:"100px",position:"absolute",left:"-9999px",zIndex:"0",overflowX:"hidden",overflowY:"scroll"}),document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function F(t){return t===void 0&&(t=w()),window.innerHeight<document.body.scrollHeight&&t>0}function B(t){const e=document.body;t&&F(t)&&(e.style.paddingRight=`${t}px`),e.style.overflow="hidden"}function Y(t){const e=document.body;e.style.overflow="",t&&(e.style.paddingRight="")}function E(t){const e=t||window.location.hash.replace("#","");return u(e)?{}:W(e)}function C(t){const e=window.location.hash.replace("#","");u(e)||t(e)}function J(t,e){C(t),!(e&&window[e])&&(e&&(window[e]=!0),window.addEventListener("hashchange",()=>{C(t)}))}function m(t,e="all"){if(!t)return;const i=`${e}TransitionTimer`;t.dataset[i]&&(clearTimeout(parseInt(t.dataset[i])),delete t.dataset[i])}function x(t,e="all",i,o){if(!t)return;const n=`${e}TransitionTimer`,s=setTimeout(()=>{m(t,e),d(o)&&o(t)},i);return t.dataset[n]=s.toString(),s}function A(t,e="all"){if(!t)return;const i=`${e}TransitionDuration`;if(t.dataset[i])return parseInt(t.dataset[i]);const o=z(t);if(o.hasOwnProperty(e))return t.dataset[i]=o[e].toString(),o[e]}function Z(t,e,i){if(!t)return;m(t,"opacity");const o=getComputedStyle(t),n=A(t,"opacity");let s=parseInt(o.opacity);Number.isNaN(s)&&(s=0),t.hasAttribute("hidden")&&t.removeAttribute("hidden"),t.style.pointerEvents="none",s||(t.style.visibility="hidden"),t.style.display="block",t.style.opacity=s||0,setTimeout(()=>{t.style.opacity=1,t.style.visibility="visible",t.style.removeProperty("pointer-events"),d(i)&&i(t)},10),x(t,"opacity",n,r=>{d(e)&&e(r)})}function X(t,e,i){if(!t)return;m(t,"opacity");const o=getComputedStyle(t),n=A(t,"opacity");t.style.opacity=o.opacity,setTimeout(()=>{t.style.opacity=0,t.style.pointerEvents="none",d(i)&&i(t)},10),x(t,"opacity",n,s=>{s.style.display="none",s.style.opacity="",s.style.pointerEvents="",d(e)&&e(s)})}var f=class{constructor(t,e,i={},o){this.id=t,this.element=e,this.modallyInstance=o,this.videoRegEx={},this.videoRegEx.YOUTUBE=_,this.videoRegEx.VIMEO=Q,this.videoRegEx.VIDEO=U,this.options={landing:document.body,maxWidth:"none",classes:"",verticalAlign:"middle",closeParent:!1,closeOthers:!1,image:!1,video:!1,autoplay:!0,scrollToTop:!0,template:`
        <div class="modally-wrap">
          <div class="modally-table">
            <div class="modally-cell">
              <div class="modally-underlay modally-close"></div>
              <div class="modally" role="dialog" aria-modal="true">
                <button tabindex="1" class="modally-close modally-close-button" aria-label="Close">&times;</button>
                <div class="modally-content"></div>
              </div>
            </div>
          </div>
        </div>`};const n=this.options.hasOwnProperty("landing")&&this.options.landing instanceof HTMLElement?this.options.landing:document.querySelector(this.options.landing);if(!n)return;if(i){const a={};for(const l in i){const K=/^[a-z0-9]+$/i.test(l)?l:v(l);a[K]=i[l]}i=a}if(y(this.options,i),this.template=this.options.template instanceof Element||this.options.template instanceof NodeList?this.options.template:h(this.options.template),this.element){for(const a in this.options){const l=/^[a-z0-9]+$/.test(a)?a:k(a);this.element.hasAttribute(`modally-${l}`)&&(this.options[a]=g(this.element.getAttribute(`modally-${l}`)))}this.element.hasAttribute("id")&&this.element.removeAttribute("id")}this.template.setAttribute("id",this.id);const s=this.template.querySelector(".modally");s&&c(s,{maxWidth:`${this.options.maxWidth}px`});const r=this.template.querySelector(".modally-cell");if(r&&c(r,{verticalAlign:this.options.verticalAlign}),u(this.options.classes)||this.template.classList.add(this.options.classes),this.options.video)this.setupVideoLanding();else if(this.options.image)this.setupImageLanding();else if(this.element){const a=V(this.element);this.template.querySelector(".modally-content").appendChild(a)}this.element&&(this.element.style.display="",this.element.removeAttribute("hidden")),this.template.querySelectorAll(".modally-close").forEach(a=>{a.addEventListener("click",l=>{l.preventDefault(),this.modallyInstance.close(this,l.target)})}),n.appendChild(this.template),this.zIndex=window.getComputedStyle(this.template).zIndex}setupVideoLanding(){const t=h('<svg aria-hidden="true" style="width: 100%; height: auto; display: block;" width="1920" height="1080"></svg>'),e=this.options.autoplay?"autoplay=1&amp;":"",i=this.options.autoplay?"autoplay=1":"",o=this.options.autoplay?" autoplay":"",n=h(`
      <div hidden>
        <iframe hidden class="youtube embed-template template" data-src="https://www.youtube.com/embed/{ID}?${e}autohide=1&amp;fs=1&amp;rel=0&amp;hd=1&amp;wmode=opaque&amp;enablejsapi=1" type="text/html" width="1920" height="1080" allow="autoplay" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto"></iframe>
        <iframe hidden class="vimeo embed-template template" title="vimeo-player" data-src="https://player.vimeo.com/video/{ID}?${i}" type="text/html" width="1920" height="1080" allow="autoplay; allowfullscreen" rameborder="0" allowfullscreen=""></iframe>
        <video hidden height="1920" width="1080" class="video embed-template template" data-src="{ID}" controls playsinline${o}></video>
      </div>
    `),s=h('<div class="iframe-landing"></div>');s.appendChild(t),this.template.querySelector(".modally-content").appendChild(s),this.template.appendChild(n),this.template.classList.add("video-embed")}setupImageLanding(){const t=h('<div class="image-landing"><img style="width: 100%; height: auto;" decoding="async" loading="lazy" alt=""></div>');this.template.querySelector(".modally-content").appendChild(t),this.template.classList.add("image-embed")}getVideoId(t){for(const e in this.videoRegEx){const i=t.match(this.videoRegEx[e]);if(i){const o=e.toLowerCase();return{type:o,id:o==="video"?t:i[1]}}this.videoRegEx[e].lastIndex=0}return!1}mountVideo(t){const e=this.getVideoId(t);let i=this.template.querySelector(`.embed-template.template.${e.type}`);const o=this.template.querySelector(".modally-content .iframe-landing");!i||!o||(i=i.cloneNode(!0),i.setAttribute("src",i.getAttribute("data-src").replace("{ID}",e.id)),i.style.display="block",i.removeAttribute("hidden"),o.appendChild(i))}unmountVideo(){const t=this.template.querySelector(".modally-content iframe, .modally-content video");t&&t.remove()}mountImage(t,e,i,o){const n=this.template.querySelector(".modally-content img");n&&(n.setAttribute("src",t),n.style.display="block",n.removeAttribute("hidden"),o&&n.setAttribute("srcset",o),e&&n.setAttribute("width",e),i&&n.setAttribute("height",i))}open(t,e){const i=t instanceof HTMLElement?t.dataset:t;this.options.video&&i&&i.hasOwnProperty("video")&&this.mountVideo(i.video),this.options.image&&i&&i.hasOwnProperty("image")&&this.mountImage(i.image,i.width,i.height,i.srcset),document.body.classList.add(`modally-${this.id}`),Z(this.template,()=>{d(e)&&e(this)},o=>{this.options.scrollToTop&&(o.scrollTop=0)})}close(t,e){X(this.template,()=>{this.options.video&&this.unmountVideo(),document.body.classList.remove(`modally-${this.id}`),d(e)&&e(this),c(this.template,{zIndex:this.zIndex})})}dispatchEvents(t,e){this.target=e,this.element&&this.element.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),this.template.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),document.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),document.dispatchEvent(new CustomEvent(`modally:${t}:${this.id}`,{detail:this}))}},G=class{constructor(t){this.index={},this.opened=[],this.options={disableScroll:!0,enableHashCheck:!0,closeOthersOnHashChange:!1},this.scrollbarWidth=w(),t&&y(this.options,t),this.options.selector&&document.querySelectorAll(this.options.selector).forEach(i=>{if(i.hasAttribute("id")){const o=this.options.selector.replace(".","");i.classList.remove(o),this.add(i.getAttribute("id"),{...this.options,element:i})}}),j('[target^="_modal"]',"click",(e,i)=>{if(!i||i.matches("[disabled]"))return;const n=i.getAttribute("target").replace("_modal:","").split(":"),s=i.getAttribute("href");let r,a;if(s&&s.length&&s!=="#"&&(e.preventDefault(),r=s.replace("#",""),a=this.get(r)),n.length>1&&(r=n[1],a=this.get(r)),n[0]==="close")return this.close(a,i);a&&this.open(a,i)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.close()}),this.options.enableHashCheck&&this.initHashCheck()}modallyHashCheck(t){const e=E(t);for(const i in e)e[i]===void 0&&this.index.hasOwnProperty(i)&&(this.options.closeOthersOnHashChange&&this.close(),this.open(i,e))}modallyInitialHashCheck(t){const e=E();e.hasOwnProperty(t)&&(this.options.closeOthersOnHashChange&&this.close(),this.open(t,e))}add(t,e){if(!t)return;e||(e={});let i;e.element?(i=e.element,delete e.element):t instanceof HTMLElement?(i=t,t=t.getAttribute("id")):i=document.getElementById(t),!i&&e.selector&&(i=p(e.selector)?document.querySelector(e.selector):e.selector,delete e.selector),this.index[t]=new f(t,i,e,this),this.index[t].dispatchEvents("added"),this.options.enableHashCheck&&this.modallyInitialHashCheck(t)}get(t){return this.index[t]}open(t,e){const i=t instanceof f?t:this.get(t);i&&(i.options.closeParent&&this.close(),i.options.closeOthers&&[...this.opened].forEach(o=>this.close(o)),i.dispatchEvents("open",e),!this.opened.length&&this.options.disableScroll&&B(this.scrollbarWidth),this.opened.length||document.body.classList.add("modally-open"),this.opened.push(i),c(i.template,{zIndex:i.zIndex+this.opened.length}),i.open(e,()=>{i.dispatchEvents("opened",e)}))}close(t,e){!t&&this.opened.length&&(t=this.opened[this.opened.length-1]);const i=t instanceof f?t:this.get(t);i&&(this.opened.pop(),i.dispatchEvents("close",e),i.close(e,()=>{!this.opened.length&&this.options.disableScroll&&Y(this.scrollbarWidth),this.opened.length||document.body.classList.remove("modally-open"),i.dispatchEvents("closed",e)}))}initHashCheck(){J(t=>{this.modallyHashCheck(t)},"modallyHashCheckListenerInitialized")}},T=G;window.Modally||(window.Modally=T),(window.hasOwnProperty("jQuery")||window.hasOwnProperty("$"))&&function(t){t.fn.modally=function(e){return window.hasOwnProperty("jQueryModally")||(window.jQueryModally=new T({disableScroll:!0,selector:".modally-init"})),this.each(function(){e.element=this,window.jQueryModally.add(this,e)})}}(jQuery||$)})();
