/* modally v1.1.0 | undefined | MIT License */
(()=>{function t(t,e){for(const i in e)t[i]=e[i]}function e(t){return function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}(t)?function(t){for(const e in t)return!1;return!0}(t):function(t){return Array.isArray(t)}(t)?function(t){return 0===t.length}(t):!!o(t)&&""===t}function i(t){if(/^\s*null\s*$/.test(t))return null;const e=function(t){if(/^\s*(true|false)\s*$/i.test(t))return"true"===t}(t);return void 0!==e?e:function(t){return/^\s*\d+\s*$/.test(t)?parseInt(t):/^\s*[\d.]+\s*$/.test(t)?parseFloat(t):void 0}(t)||function(t){if(/^\s*\[.*\]\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\{.*\}\s*$/.test(t))try{return JSON.parse(t)}catch(t){}}(t)||function(t){if(/^\s*\/.*\/g?i?\s*$/.test(t))try{return new RegExp(t)}catch(t){}}(t)||t}function o(t){return"string"==typeof t}function s(t){return"function"==typeof t}function n(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}function l(t,e,i=!1){if(t&&e)for(let o in e)i&&(o=n(o)),t.style[o]=e[o]}function a(t){const e=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!e)return 0;switch(e[2]){case"ms":return parseFloat(e[1]);case"s":return 1e3*parseFloat(e[1]);default:return 0}}function d(t){return(new DOMParser).parseFromString(t,"text/html").body.firstChild}var r=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i,c=/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,h=/(.*\/[^\/]+\.mp4|ogg|ogv|ogm|webm|avi)\s?$/i,p=/([^\s=&]+)=?([^&\s]+)?/;function m(){const t=document.createElement("div");l(t,{width:"100px",height:"100px",position:"absolute",left:"-9999px",zIndex:"0",overflowX:"hidden",overflowY:"scroll"}),document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function u(t){const e=document.body;var i;t&&(void 0===(i=t)&&(i=m()),window.innerHeight<document.body.scrollHeight&&i>0)&&(e.style.paddingRight=`${t}px`),e.style.overflow="hidden"}function y(t){const o=t||window.location.hash.replace("#","");return e(o)?{}:function(t,e=!0){const o={};return t.split("&").forEach((t=>{const s=t.match(p),n=s[1],l=s[2];o[n]=void 0!==l&&e?i(decodeURIComponent(l)):l,p.lastIndex=0})),o}(o)}function v(t){const i=window.location.hash.replace("#","");e(i)||t(i)}function g(t,e="all"){if(!t)return;const i=`${e}TransitionTimer`;t.dataset[i]&&(clearTimeout(parseInt(t.dataset[i])),delete t.dataset[i])}function f(t,e="all",i,o){if(!t)return;const n=`${e}TransitionTimer`,l=setTimeout((()=>{g(t,e),s(o)&&o(t)}),i);return t.dataset[n]=l.toString(),l}function b(t,e="all"){if(!t)return;const i=`${e}TransitionDuration`;if(t.dataset[i])return parseInt(t.dataset[i]);const o=function(t){const e=getComputedStyle(t),i=e.getPropertyValue("transition-property").split(","),o=e.getPropertyValue("transition-duration").split(","),s={};for(let t=0;t<i.length;t++)s[i[t].trim()]=o.hasOwnProperty(t)?a(o[t].trim()):null;return s}(t);return o.hasOwnProperty(e)?(t.dataset[i]=o[e].toString(),o[e]):void 0}var w=class{constructor(o,s,a={},p){this.id=o,this.element=s,this.modallyInstance=p,this.videoRegEx={},this.videoRegEx.YOUTUBE=r,this.videoRegEx.VIMEO=c,this.videoRegEx.VIDEO=h,this.options={landing:"body",maxWidth:"none",classes:"",verticalAlign:"middle",closeParent:!1,closeOthers:!1,image:!1,video:!1,autoplay:!0,template:'\n        <div class="modally-wrap">\n          <div class="modally-table">\n            <div class="modally-cell">\n              <div class="modally-underlay modally-close"></div>\n              <div class="modally" role="dialog" aria-modal="true">\n                <button tabindex="1" class="modally-close modally-close-button">&times;</button>\n                <div class="modally-content"></div>\n              </div>\n            </div>\n          </div>\n        </div>'};const m=this.options.hasOwnProperty("landing")&&this.options.landing instanceof HTMLElement?this.options.landing:document.querySelector(this.options.landing);if(!m)return;if(a){const t={};for(const e in a){t[/^[a-z0-9]+$/i.test(e)?e:n(e)]=a[e]}a=t}if(t(this.options,a),this.template=d(this.options.template),this.element){for(const t in this.options){const e=/^[a-z0-9]+$/.test(t)?t:t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();this.element.hasAttribute(`modally-${e}`)&&(this.options[t]=i(this.element.getAttribute(`modally-${e}`)))}this.element.hasAttribute("id")&&this.element.removeAttribute("id")}this.template.setAttribute("id",this.id);const u=this.template.querySelector(".modally");u&&l(u,{maxWidth:this.options.maxWidth});const y=this.template.querySelector(".modally-cell");if(y&&l(y,{verticalAlign:this.options.verticalAlign}),e(this.options.classes)||this.template.classList.add(this.options.classes),this.options.video)this.setupVideoLanding();else if(this.options.image)this.setupImageLanding();else if(this.element){const t=((v=this.element)&&v.parentNode&&v.parentNode.removeChild(v),v);this.template.querySelector(".modally-content").appendChild(t)}var v;this.element&&(this.element.style.display="",this.element.removeAttribute("hidden")),this.template.querySelectorAll(".modally-close").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),this.modallyInstance.close(this)}))})),m.appendChild(this.template),this.zIndex=window.getComputedStyle(this.template).zIndex}setupVideoLanding(){const t=d('<svg aria-hidden="true" style="width: 100%; height: auto; display: block;" width="1920" height="1080"></svg>'),e=d(`\n      <div hidden>\n        <iframe hidden class="youtube embed-template template" data-src="https://www.youtube.com/embed/{ID}?${this.options.autoplay?"autoplay=1&amp;":""}autohide=1&amp;fs=1&amp;rel=0&amp;hd=1&amp;wmode=opaque&amp;enablejsapi=1" type="text/html" width="1920" height="1080" allow="autoplay" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto"></iframe>\n        <iframe hidden class="vimeo embed-template template" title="vimeo-player" data-src="https://player.vimeo.com/video/{ID}?${this.options.autoplay?"autoplay=1":""}" type="text/html" width="1920" height="1080" allow="autoplay; allowfullscreen" rameborder="0" allowfullscreen=""></iframe>\n        <video hidden height="1920" width="1080" class="video embed-template template" data-src="{ID}" controls playsinline${this.options.autoplay?" autoplay":""}></video>\n      </div>\n    `),i=d('<div class="iframe-landing"></div>');i.appendChild(t),this.template.querySelector(".modally-content").appendChild(i),this.template.appendChild(e),this.template.classList.add("video-embed")}setupImageLanding(){const t=d('<div class="image-landing"><img style="width: 100%; height: auto;" decoding="async" loading="lazy" alt=""></div>');this.template.querySelector(".modally-content").appendChild(t),this.template.classList.add("image-embed")}getVideoId(t){for(const e in this.videoRegEx){const i=t.match(this.videoRegEx[e]);if(i)return{type:e.toLowerCase(),id:i[1]};this.videoRegEx[e].lastIndex=0}return!1}mountVideo(t){const e=this.getVideoId(t);let i=this.template.querySelector(`.embed-template.template.${e.type}`);const o=this.template.querySelector(".modally-content .iframe-landing");i&&o&&(i=i.cloneNode(!0),i.setAttribute("src",i.getAttribute("data-src").replace("{ID}",e.id)),i.style.display="block",i.removeAttribute("hidden"),o.appendChild(i))}unmountVideo(){const t=this.template.querySelector(".modally-content iframe, .modally-content video");t&&t.remove()}mountImage(t){const e=this.template.querySelector(".modally-content img");e&&(e.setAttribute("src",t),e.style.display="block",e.removeAttribute("hidden"))}open(t,e){this.options.video&&t&&t.hasOwnProperty("video")&&this.mountVideo(t.video),this.options.image&&t&&t.hasOwnProperty("image")&&this.mountImage(t.image),document.body.classList.add(`modally-${this.id}`),function(t,e){if(!t)return;g(t,"opacity");const i=getComputedStyle(t),o=b(t,"opacity");let n=parseInt(i.opacity);isNaN(n)&&(n=0),t.hasAttribute("hidden")&&t.removeAttribute("hidden"),t.style.pointerEvents="none",n||(t.style.visibility="hidden"),t.style.display="block",t.style.opacity=n||0,setTimeout((()=>{t.style.opacity=1,t.style.visibility="visible",t.style.removeProperty("pointer-events")}),10),f(t,"opacity",o,(t=>{s(e)&&e(t)}))}(this.template,(()=>{s(e)&&e(this)}))}close(t,e){!function(t,e){if(!t)return;g(t,"opacity");const i=getComputedStyle(t),o=b(t,"opacity");t.style.opacity=i.opacity,setTimeout((()=>{t.style.opacity=0,t.style.pointerEvents="none"}),10),f(t,"opacity",o,(t=>{t.style.display="none",t.style.opacity="",t.style.pointerEvents="",s(e)&&e(t)}))}(this.template,(()=>{this.options.video&&this.unmountVideo(),document.body.classList.remove(`modally-${this.id}`),s(e)&&e(this),l(this.template,{zIndex:this.zIndex})}))}dispatchEvents(t){this.element&&this.element.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),this.template.dispatchEvent(new CustomEvent(`modally:${t}`,{detail:this})),document.dispatchEvent(new CustomEvent(`modally:${t}:${this.id}`,{detail:this}))}},E=class{constructor(e){if(this.index={},this.opened=[],this.options={disableScroll:!0},this.scrollbarWidth=m(),e&&t(this.options,e),this.options.selector){document.querySelectorAll(this.options.selector).forEach((t=>{if(t.hasAttribute("id")){const e=this.options.selector.replace(".","");t.classList.remove(e),this.add(t.getAttribute("id"),{element:t})}}))}document.addEventListener("click",(t=>{const e=t.target;if(!e.matches('[target^="_modal"]:not([disabled])'))return;const i=e.getAttribute("target").replace("_modal:","").split(":"),o=e.getAttribute("href");let s,n;if(o&&o.length&&"#"!==o&&(t.preventDefault(),s=o.replace("#",""),n=this.get(s)),i.length>1&&(s=i[1],n=this.get(s)),"close"===i[0])return this.close(n,e.dataset);n&&this.open(n,e.dataset)})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.close()}))}modallyHashCheck(t){const e=y(t);for(const t in e)void 0===e[t]&&this.index.hasOwnProperty(t)&&this.open(t,e)}add(t,e){let i=document.getElementById(t);e||(e={}),!i&&e.selector&&(i=o(e.selector)?document.querySelector(e.selector):e.selector,delete e.selector),!i&&e.element&&(i=e.element,delete e.element),this.index[t]=new w(t,i,e,this),this.index[t].dispatchEvents("added")}get(t){return this.index[t]}open(t,e){const i=t instanceof w?t:this.get(t);i&&(i.options.closeParent&&this.close(),i.options.closeOthers&&[...this.opened].forEach((t=>this.close(t))),i.dispatchEvents("opening"),!this.opened.length&&this.options.disableScroll&&u(this.scrollbarWidth),this.opened.length||document.body.classList.add("modally-open"),this.opened.push(i),l(i.template,{zIndex:i.zIndex+this.opened.length}),i.open(e,(()=>{i.dispatchEvents("opened")})))}close(t,e){!t&&this.opened.length&&(t=this.opened[this.opened.length-1]);const i=t instanceof w?t:this.get(t);i&&(this.opened.pop(),i.dispatchEvents("closing"),i.close(e,(()=>{!this.opened.length&&this.options.disableScroll&&function(t){const e=document.body;e.style.overflow="",t&&(e.style.paddingRight="")}(this.scrollbarWidth),this.opened.length||document.body.classList.remove("modally-open"),i.dispatchEvents("closed")})))}initHashCheck(){var t;v(t=t=>{this.modallyHashCheck(t)}),window.addEventListener("hashchange",(()=>{v(t)}))}};window.Modally||(window.Modally=E)})();